<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Insights | Luxury Dining Analytics</title>

<!-- Luxury Fonts -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Inter:wght@300;400;600&display=swap">

<style>
    body {
        margin: 0;
        padding: 30px;
        background: #f7f3ec; /* same as public & staff */
        font-family: "Inter", sans-serif;
        color: #3b2f2f;
    }

    h2 {
        font-family: "Playfair Display", serif;
        font-size: 32px;
        color: #7a5a2b;
        text-align: center;
        margin-bottom: 35px;
    }

    /* INSIGHTS GRID */
    .grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 25px;
        max-width: 900px;
        margin: auto;
    }

    .card {
        background: #ffffff;
        padding: 25px;
        border-radius: 16px;
        border: 2px solid #c9a35a; /* gold */
        box-shadow: 0 10px 28px rgba(0,0,0,0.15);
        text-align: center;
    }

    .label {
        font-family: "Playfair Display", serif;
        font-size: 20px;
        color: #7a5a2b;
        margin-bottom: 10px;
    }

    .value {
        font-family: "Playfair Display", serif;
        font-size: 32px;
        font-weight: 700;
        color: #c9a35a;
    }

    /* Full-width card */
    .full {
        grid-column: span 2;
    }
</style>
</head>

<body>

<h2>Operational Insights</h2>

<div class="grid">
    <div class="card">
        <div class="label">New Orders</div>
        <div class="value" id="countNew">0</div>
    </div>

    <div class="card">
        <div class="label">Preparing</div>
        <div class="value" id="countPrep">0</div>
    </div>

    <div class="card">
        <div class="label">Ready</div>
        <div class="value" id="countReady">0</div>
    </div>

    <div class="card">
        <div class="label">Collected</div>
        <div class="value" id="countCollected">0</div>
    </div>

    <div class="card full">
        <div class="label">Today's Total Orders</div>
        <div class="value" id="todayThroughput">0</div>
    </div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>

<script>
// FIREBASE CONFIG — replace with yours
const firebaseConfig = {
    apiKey: "YOUR_KEY",
    authDomain: "YOUR_DOMAIN",
    projectId: "YOUR_PROJECT"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

// REAL-TIME INSIGHTS
db.collection("orders").onSnapshot(snapshot => {
    let stats = { New: 0, Preparing: 0, Ready: 0, Collected: 0 };
    let todayCount = 0;

    let today = new Date();
    today.setHours(0,0,0,0);

    snapshot.forEach(doc => {
        let data = doc.data();

        // Count by status
        stats[data.status] = (stats[data.status] || 0) + 1;

        // Throughput for today
        if (data.createdAt?.toDate() >= today) {
            todayCount++;
        }
    });

    // Update UI
    document.getElementById("countNew").innerText = stats.New;
    document.getElementById("countPrep").innerText = stats.Preparing;
    document.getElementById("countReady").innerText = stats.Ready;
    document.getElementById("countCollected").innerText = stats.Collected;
    document.getElementById("todayThroughput").innerText = todayCount;
});
</script>

</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Insights | Luxury Dining Analytics</title>

<!-- Luxury Fonts -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Inter:wght@300;400;600&display=swap">

<style>
    body {
        margin: 0;
        padding: 30px;
        background: #f7f3ec; /* same as public & staff */
        font-family: "Inter", sans-serif;
        color: #3b2f2f;
    }

    h2 {
        font-family: "Playfair Display", serif;
        font-size: 32px;
        color: #7a5a2b;
        text-align: center;
        margin-bottom: 35px;
    }

    /* INSIGHTS GRID */
    .grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 25px;
        max-width: 900px;
        margin: auto;
    }

    .card {
        background: #ffffff;
        padding: 25px;
        border-radius: 16px;
        border: 2px solid #c9a35a; /* gold */
        box-shadow: 0 10px 28px rgba(0,0,0,0.15);
        text-align: center;
    }

    .label {
        font-family: "Playfair Display", serif;
        font-size: 20px;
        color: #7a5a2b;
        margin-bottom: 10px;
    }

    .value {
        font-family: "Playfair Display", serif;
        font-size: 32px;
        font-weight: 700;
        color: #c9a35a;
    }

    /* Full-width card */
    .full {
        grid-column: span 2;
    }
</style>
</head>

<body>

<h2>Operational Insights</h2>

<div class="grid">
    <div class="card">
        <div class="label">New Orders</div>
        <div class="value" id="countNew">0</div>
    </div>

    <div class="card">
        <div class="label">Preparing</div>
        <div class="value" id="countPrep">0</div>
    </div>

    <div class="card">
        <div class="label">Ready</div>
        <div class="value" id="countReady">0</div>
    </div>

    <div class="card">
        <div class="label">Collected</div>
        <div class="value" id="countCollected">0</div>
    </div>

    <div class="card full">
        <div class="label">Today's Total Orders</div>
        <div class="value" id="todayThroughput">0</div>
    </div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>

<script>
// FIREBASE CONFIG — replace with yours
const firebaseConfig = {
  apiKey: "AIzaSyCT9xJpf2Pqc5ztXUQgDKr6QomDGrrCsQQ",
  authDomain: "live-order-board-7d91d.firebaseapp.com",
  projectId: "live-order-board-7d91d",
  storageBucket: "live-order-board-7d91d.firebasestorage.app",
  messagingSenderId: "554540932186",
  appId: "1:554540932186:web:17bf2a4367c294764a0c63"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

// REAL-TIME INSIGHTS
db.collection("orders").onSnapshot(snapshot => {
    let stats = { New: 0, Preparing: 0, Ready: 0, Collected: 0 };
    let todayCount = 0;

    let today = new Date();
    today.setHours(0,0,0,0);

    snapshot.forEach(doc => {
        let data = doc.data();

        // Count by status
        stats[data.status] = (stats[data.status] || 0) + 1;

        // Throughput for today
        if (data.createdAt?.toDate() >= today) {
            todayCount++;
        }
    });

    // Update UI
    document.getElementById("countNew").innerText = stats.New;
    document.getElementById("countPrep").innerText = stats.Preparing;
    document.getElementById("countReady").innerText = stats.Ready;
    document.getElementById("countCollected").innerText = stats.Collected;
    document.getElementById("todayThroughput").innerText = todayCount;
});
</script>

</body>
</html>
